{% extends 'bakery/base.html' %}
{% block title %}–ö–æ—Ä–∑–∏–Ω–∞{% endblock %}

{% block content %}
<div class="container mt-5">
  <h2 class="mb-4">üõí –í–∞—à–∞ –∫–æ—Ä–∑–∏–Ω–∞</h2>
  {% if cart_items %}
    <table class="table table-striped table-hover align-middle">
      <thead class="table-dark">
        <tr>
          <th>–¢–æ–≤–∞—Ä</th>
          <th>–¶–µ–Ω–∞</th>
          <th>–ö–æ–ª–∏—á–µ—Å—Ç–≤–æ</th>
          <th>–ò—Ç–æ–≥–æ</th>
          <th></th>
        </tr>
      </thead>
      <tbody>
        {% for item in cart_items %}
        <tr>
          <td>{{ item.name }}</td>
          <td>{{ item.price }}÷è</td>
          <td>{{ item.quantity }}</td>
          <td class="fw-bold">{{ item.subtotal }}÷è</td>
          <td>
            <form method="post" action="{% url 'remove_from_cart' item.id %}" style="display:inline;">
              {% csrf_token %}
              <button type="submit" class="btn btn-sm btn-outline-danger" title="–£–¥–∞–ª–∏—Ç—å">
                &times;
              </button>
            </form>
          </td>
        </tr>
        {% endfor %}
      </tbody>
      <tfoot>
        <tr class="table-secondary fw-bold">
          <td colspan="3" class="text-end">–û–±—â–∞—è —Å—É–º–º–∞:</td>
          <td>{{ total }}÷è</td>
          <td></td>
        </tr>
      </tfoot>
    </table>

    <div class="d-flex justify-content-between">
      <a href="{% url 'product_list' %}" class="btn btn-outline-primary">–ü—Ä–æ–¥–æ–ª–∂–∏—Ç—å –ø–æ–∫—É–ø–∫–∏ ü•ñ</a>
      <div>
        <a href="{% url 'clear_cart' %}" class="btn btn-outline-danger me-2"
           onclick="return confirm('–û—á–∏—Å—Ç–∏—Ç—å –∫–æ—Ä–∑–∏–Ω—É?')">–û—á–∏—Å—Ç–∏—Ç—å –∫–æ—Ä–∑–∏–Ω—É üóëÔ∏è</a>
        <a href="{% url 'checkout' %}" class="btn btn-success">–û—Ñ–æ—Ä–º–∏—Ç—å –∑–∞–∫–∞–∑ ‚úÖ</a>
      </div>
    </div>

  {% else %}
    <p class="lead text-muted">–í–∞—à–∞ –∫–æ—Ä–∑–∏–Ω–∞ –ø—É—Å—Ç–∞. <a href="{% url 'product_list' %}">–ü–µ—Ä–µ–π—Ç–∏ –∫ –ø–æ–∫—É–ø–∫–∞–º</a></p>
  {% endif %}
</div>
{% endblock %}
