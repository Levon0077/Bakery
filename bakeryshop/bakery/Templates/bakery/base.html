<!DOCTYPE html>
<html lang="ru">
<head>
    {% load static %}
    <meta charset="UTF-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1" />
    <title>{% block title %}Bakery Shop{% endblock %}</title>

    <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.0/dist/css/bootstrap.min.css" rel="stylesheet" />

    {% block extra_css %}{% endblock %}

    <style>
        .offcanvas-start { width: 250px; }
    </style>
</head>
<body>

<header class="bg-light p-3 mb-4">
  <div class="container">
    <div class="d-flex justify-content-between align-items-center">
      <h1><a href="{% url 'index' %}" class="text-decoration-none text-dark">üçû Bakery Shop</a></h1>

      {% if user.is_authenticated %}
        <button class="btn btn-outline-secondary" type="button" data-bs-toggle="offcanvas" data-bs-target="#profileSidebar" aria-controls="profileSidebar">&#9776;</button>
      {% endif %}
    </div>
    <nav class="navbar navbar-expand-lg navbar-light bg-light mt-2">
      <div class="container-fluid">
        <ul class="navbar-nav">
          <li class="nav-item"><a class="nav-link" href="{% url 'product_list' %}">–í—Å–µ —Ç–æ–≤–∞—Ä—ã</a></li>
          <li class="nav-item"><a class="nav-link" href="{% url 'cart' %}">–ö–æ—Ä–∑–∏–Ω–∞</a></li>
          <li class="nav-item"><a class="nav-link" href="{% url 'order_history' %}">–ò—Å—Ç–æ—Ä–∏—è –∑–∞–∫–∞–∑–æ–≤</a></li>
        </ul>
        <ul class="navbar-nav ms-auto">
          {% if not user.is_authenticated %}
            <li class="nav-item"><a class="nav-link" href="{% url 'login' %}">–í–æ–π—Ç–∏</a></li>
            <li class="nav-item"><a class="nav-link" href="{% url 'register' %}">–ó–∞—Ä–µ–≥–∏—Å—Ç—Ä–∏—Ä–æ–≤–∞—Ç—å—Å—è</a></li>
          {% endif %}
        </ul>
      </div>
    </nav>
  </div>
</header>

<div class="offcanvas offcanvas-start" tabindex="-1" id="profileSidebar" aria-labelledby="profileSidebarLabel">
  <div class="offcanvas-header">
    <h5 class="offcanvas-title" id="profileSidebarLabel">–ü—Ä–æ—Ñ–∏–ª—å</h5>
    <button type="button" class="btn-close text-reset" data-bs-dismiss="offcanvas" aria-label="–ó–∞–∫—Ä—ã—Ç—å"></button>
  </div>
  <div class="offcanvas-body">
    <ul class="list-group">
      <li class="list-group-item"><a href="{% url 'edit_profile' %}">–†–µ–¥–∞–∫—Ç–∏—Ä–æ–≤–∞—Ç—å –ø—Ä–æ—Ñ–∏–ª—å</a></li>
      <li class="list-group-item"><a href="{% url 'change_avatar' %}">–ò–∑–º–µ–Ω–∏—Ç—å –∞–≤–∞—Ç–∞—Ä</a></li>
      <li class="list-group-item"><a href="{% url 'cart' %}">–ö–æ—Ä–∑–∏–Ω–∞</a></li>
      <li class="list-group-item"><a href="{% url 'order_history' %}">–ò—Å—Ç–æ—Ä–∏—è –∑–∞–∫–∞–∑–æ–≤</a></li>
      <li class="list-group-item"><a href="{% url 'delete_account' %}" class="text-danger">–£–¥–∞–ª–∏—Ç—å –∞–∫–∫–∞—É–Ω—Ç</a></li>
      <li class="list-group-item"><a href="{% url 'logout' %}">–í—ã—Ö–æ–¥</a></li>
    </ul>
  </div>
</div>

<main class="container">
    {% if messages %}
    <div class="my-3" style="margin-top: 1rem;">
      {% for message in messages %}
        <div class="alert alert-{{ message.tags }} alert-dismissible fade show" role="alert" data-bs-delay="4000" data-bs-autohide="true">
          {{ message }}
          <button type="button" class="btn-close" data-bs-dismiss="alert" aria-label="–ó–∞–∫—Ä—ã—Ç—å"></button>
        </div>
      {% endfor %}
    </div>
    {% endif %}
    {% block content %}{% endblock %}
</main>

<footer class="bg-light text-center py-3 mt-4">
  <p>&copy; 2025 Bakery Shop</p>
</footer>

<script src="https://cdn.jsdelivr.net/npm/bootstrap@5.3.0/dist/js/bootstrap.bundle.min.js"></script>
</body>
</html>
